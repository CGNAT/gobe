<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Gobe: interactive comparative genomics viewer &mdash; gobe v0.3 documentation</title>
    <link rel="stylesheet" href="../static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.3',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../static/jquery.js"></script>
    <script type="text/javascript" src="../static/doctools.js"></script>
    <link rel="top" title="gobe v0.3 documentation" href="../index.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li><a href="../index.html">gobe v0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference external" href="#">Gobe: interactive comparative genomics viewer</a></li>
<li><a class="reference external" href="#summary">Summary</a></li>
<li><a class="reference external" href="#annotations">Annotations</a><ul>
<li><a class="reference external" href="#annotation">Annotation</a></li>
<li><a class="reference external" href="#glyphs">Glyphs</a></li>
<li><a class="reference external" href="#text">Text</a></li>
</ul>
</li>
<li><a class="reference external" href="#track">Track</a></li>
<li><a class="reference external" href="#hsp">HSP</a></li>
<li><a class="reference external" href="#style">Style</a></li>
<li><a class="reference external" href="#plots">Plots</a><ul>
<li><a class="reference external" href="#lineplots">LinePlots</a></li>
<li><a class="reference external" href="#histograms">Histograms</a></li>
</ul>
</li>
<li><a class="reference external" href="#javascript-callbacks">Javascript Callbacks</a></li>
<li><a class="reference external" href="#getting-started">Getting Started</a></li>
<li><a class="reference external" href="#todo">TODO</a></li>
</ul>

            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../sources/_templates/README.txt"
                     rel="nofollow">Show Source</a></li>
            </ul>
          <div id="searchbox" style="display: none">
            <h3>Quick search</h3>
              <form class="search" action="../search.html" method="get">
                <input type="text" name="q" size="18" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
              </form>
              <p class="searchtip" style="font-size: 90%">
              Enter search terms or a module, class or function name.
              </p>
          </div>
          <script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="gobe-interactive-comparative-genomics-viewer">
<h1><a class="toc-backref" href="#id2">Gobe: interactive comparative genomics viewer</a><a class="headerlink" href="#gobe-interactive-comparative-genomics-viewer" title="Permalink to this headline">¶</a></h1>
<img align="right" alt="http://lh5.ggpht.com/_uU_kLC5AdTc/TCJP77hL_HI/AAAAAAAAA2E/LwVimCjeoUs/s800/gobe.png" class="align-right" src="http://lh5.ggpht.com/_uU_kLC5AdTc/TCJP77hL_HI/AAAAAAAAA2E/LwVimCjeoUs/s800/gobe.png" />
<p>interactive, light-weight, customizable, web-based comparative genomics viewer with simple text input format.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field"><th class="field-name">Authors:</th><td class="field-body">Brent Pedersen (brentp), Haibao Tang (tanghaibao)</td>
</tr>
<tr class="field"><th class="field-name">Email:</th><td class="field-body"><a class="reference external" href="mailto:bpederse&#37;&#52;&#48;gmail&#46;com">bpederse<span>&#64;</span>gmail<span>&#46;</span>com</a></td>
</tr>
<tr class="field"><th class="field-name">License:</th><td class="field-body">MIT</td>
</tr>
</tbody>
</table>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#gobe-interactive-comparative-genomics-viewer" id="id2">Gobe: interactive comparative genomics viewer</a></li>
<li><a class="reference internal" href="#summary" id="id3">Summary</a></li>
<li><a class="reference internal" href="#annotations" id="id4">Annotations</a><ul>
<li><a class="reference internal" href="#annotation" id="id5">Annotation</a></li>
<li><a class="reference internal" href="#glyphs" id="id6">Glyphs</a></li>
<li><a class="reference internal" href="#text" id="id7">Text</a></li>
</ul>
</li>
<li><a class="reference internal" href="#track" id="id8">Track</a></li>
<li><a class="reference internal" href="#hsp" id="id9">HSP</a></li>
<li><a class="reference internal" href="#style" id="id10">Style</a></li>
<li><a class="reference internal" href="#plots" id="id11">Plots</a><ul>
<li><a class="reference internal" href="#lineplots" id="id12">LinePlots</a></li>
<li><a class="reference internal" href="#histograms" id="id13">Histograms</a></li>
</ul>
</li>
<li><a class="reference internal" href="#javascript-callbacks" id="id14">Javascript Callbacks</a></li>
<li><a class="reference internal" href="#getting-started" id="id15">Getting Started</a></li>
<li><a class="reference internal" href="#todo" id="id16">TODO</a></li>
</ul>
</div>
</div>
<div class="section" id="summary">
<h1><a class="toc-backref" href="#id3">Summary</a><a class="headerlink" href="#summary" title="Permalink to this headline">¶</a></h1>
<p>You define a set of features, a set of tracks, and a css for styling features
and you get a flash movie that allows you to interact with genomic data. The
simple format makes it trivial to implement further interactivity including
panning and zooming.</p>
<p>Interaction is customizable via javascript callbacks, css, and the input data.
No server-side rendering is required. <a class="reference external" href="http://haxe.org/">haxe</a> programming language is used for
development, but it is not required to use the library.</p>
</div>
<div class="section" id="annotations">
<h1><a class="toc-backref" href="#id4">Annotations</a><a class="headerlink" href="#annotations" title="Permalink to this headline">¶</a></h1>
<p>The annotations to be rendered by the flash movie are in a simple text format.
The best way to understand them is to briefly skim the summaries below and
have a look at the examples in the
<a class="reference external" href="http://github.com/brentp/gobe/tree/master/data/">data/</a> directory.</p>
<div class="section" id="annotation">
<h2><a class="toc-backref" href="#id5">Annotation</a><a class="headerlink" href="#annotation" title="Permalink to this headline">¶</a></h2>
<p>An annotation is anything to be drawn. These will be things like CDSs,
genes, mRNAs, UTRs or any feature you define and style.
There are 2 special types: <a class="reference internal" href="#hsp">HSP</a>&#8216;s and <a class="reference internal" href="#track">Track</a>
Briefly, an <a class="reference internal" href="#hsp">HSP</a> allows one to draw relationships between features. The
relationship is inferred between consecutive annotations with type &#8216;HSP&#8217;
in the file.
<a class="reference internal" href="#track">Track</a> s allow one to explicitly set the limits for each track (otherwise
inferred by the extent of the features in that track).</p>
<p>The annotation file is a text file with 7 <strong>comma-delimited</strong> columns per row:</p>
<blockquote>
<ol class="arabic simple">
<li><cite>id</cite>: a unique identifier for this annotation. this is anything you
want, can be your own database id or gene name or just an enumeration.</li>
<li><cite>track_id</cite>: the id of the track on which to draw this feature.
See <a class="reference internal" href="#track">Track</a>.</li>
<li><cite>start</cite>: the start of the feature.</li>
<li><cite>end</cite>: the end of the feature.</li>
<li><cite>type</cite>: a feature type (CDS, gene etc). If not specified, &#8216;default&#8217; is used.</li>
<li><cite>strand</cite>: either &#8216;+&#8217; or &#8216;-&#8216;, the strand of the feature. <a class="reference internal" href="#hsp">HSP</a>&#8216;s with a
+/- match should both be assigned - as the strand. If not specified &#8216;+&#8217; is used.</li>
<li><em>optional</em> <cite>name</cite>: the name of the feature e.g. &#8216;At2g26540&#8217;. Can be anything. If not specified
<cite>id</cite> is used.</li>
<li><em>optional</em> <cite>color</cite>: the color of the feature to override that specified by its type. if not specified
the value in <cite>type</cite> is used.</li>
</ol>
</blockquote>
<p>an example looks like</p>
<div class="highlight-python"><pre>1,5,25,38,HSP,+,name1
2,4,22,123,HSP,+,name2
At2g26540,4,1110,1683,gene,+,feature name
3,4,1210,1653,CDS,+,name3
4,4,1210,1653,CDS,-,name4</pre>
</div>
<p>Note the last 4 will all be drawn in a <a class="reference internal" href="#track">Track</a> with id 4. The 5th will be
drawn in track with id &#8216;5&#8217; and only the 3rd item is on the - strand. You may
have thousands of annotations. The ids do not have to be numeric.
Consecutive <a class="reference internal" href="#hsp">HSP</a>&#8216;s will be linked with an edge.</p>
</div>
<div class="section" id="glyphs">
<h2><a class="toc-backref" href="#id6">Glyphs</a><a class="headerlink" href="#glyphs" title="Permalink to this headline">¶</a></h2>
<p>Glyphs can be specified in the .css file as</p>
<div class="highlight-python"><pre>{ glyph: cross; fill_color: #fff000; fill_alpha: 1.0 }</pre>
</div>
<p>when a row in the annotations file has a type of &#8216;cross&#8217;, it will then be drawn
with a glyph that appears as a cross a the specified as the x coordinate specified.
For glyphs, the xmin, xmax columns will likely be the same, if not, the glyph will
be rendered in the center of the specified range.</p>
</div>
<div class="section" id="text">
<h2><a class="toc-backref" href="#id7">Text</a><a class="headerlink" href="#text" title="Permalink to this headline">¶</a></h2>
<p>when the glyph is specified as glyph: text_glyph, the text in the <cite>name</cite> field will
be rendered as is. The text can contain any markup that flash can understand.
<a class="reference external" href="http://www.adobe.com/livedocs/flash/9.0/ActionScriptLangRefV3/flash/text/TextField.html#htmlText">See here</a>
for a description of the supported tags. This allows arbitrary labelling,
coloring, and sizing for each feature.
See the example in <a class="reference external" href="http://github.com/brentp/gobe/blob/master/data/glyph.txt">glyph.txt</a></p>
</div>
</div>
<div class="section" id="track">
<h1><a class="toc-backref" href="#id8">Track</a><a class="headerlink" href="#track" title="Permalink to this headline">¶</a></h1>
<p>An line in the annotation file with type &#8216;track&#8217; defines the name and extent
of regions a track. The first column is used as the track_id (which is
referenced by other anntations) and the 2nd column is used as the display name.
The start and end indicate the bounds of the track. Annotations outside of
these bounds will not be rendered.</p>
<p>an example looks like (note this is the same format and same file as
<a class="reference internal" href="#annotations">Annotations</a>)</p>
<div class="highlight-python"><pre>track_1,Track 1,9,1999,track</pre>
</div>
<p>So in that example, the bounds are from 9 to 1999 in basepair coordinates and
any annotation beloning to this track will use &#8216;track 1&#8217; in the track column.</p>
<p><strong>NOTE</strong> that if no tracks are specified then the track ids and extents
will be inferred from the annotations. The extent of the annotations for
each track will be padded slightly to calculate the extent of the track.</p>
</div>
<div class="section" id="hsp">
<h1><a class="toc-backref" href="#id9">HSP</a><a class="headerlink" href="#hsp" title="Permalink to this headline">¶</a></h1>
<p>Consecutive HSP&#8217;s specified in the <a class="reference internal" href="#annotations">Annotations</a> file are related.
Inside the flash movie, clicking either part of an HSP will result in
a wedge being drawn between it and its pair (as in the example images).</p>
<p>edges are inferred between consecutive HSP&#8217;s.  So that hsp annotation
lines like:</p>
<div class="highlight-python"><pre>1,HSP,25,38,+,4,4
2,HSP,22,123,+,5,5
3,HSP,35,68,+,4,4
4,HSP,99,223,+,5,5</pre>
</div>
<p>will infer edges between HSP&#8217;s 1,2 and HSP&#8217;s 3,4. This is common e.g. when
parsing a blast, where it&#8217;s very simple to output consecutive lines for a
single blast pair.</p>
<p>Any annotation <strong>beginning with</strong> &#8220;HSP&#8221; will be treated in this manner. This
allows one to have different style classes for HSPs. e.g. HSP_blue, HSP_red.</p>
</div>
<div class="section" id="style">
<h1><a class="toc-backref" href="#id10">Style</a><a class="headerlink" href="#style" title="Permalink to this headline">¶</a></h1>
<p>Styling is done via CSS. See the <a class="reference external" href="http://github.com/brentp/gobe/blob/master/static/gobe.css">default style</a>
in gobe. When adding new features, it&#8217;s wise to add a new style corresponding to each feature type.
The style sheet is specified on the URL through the style argument. e.g.</p>
<div class="highlight-python"><pre>&amp;style=/static/super-awesome.css</pre>
</div>
<p>it must be on the same server as the SWF movie, or set up on a server that allows access via
crossdomain.xml.</p>
</div>
<div class="section" id="plots">
<h1><a class="toc-backref" href="#id11">Plots</a><a class="headerlink" href="#plots" title="Permalink to this headline">¶</a></h1>
<p>It is also possible to plot line plots and histogram plots. Here is an example with a line plot
on the top strand and a histogram on the bottom strand. (this is linked in index.html examples).</p>
<img alt="http://lh6.ggpht.com/_uU_kLC5AdTc/S_waNKlZqwI/AAAAAAAAA1Q/6cmENZia_Co/gobe_plot.png" src="http://lh6.ggpht.com/_uU_kLC5AdTc/S_waNKlZqwI/AAAAAAAAA1Q/6cmENZia_Co/gobe_plot.png" />
<div class="section" id="lineplots">
<h2><a class="toc-backref" href="#id12">LinePlots</a><a class="headerlink" href="#lineplots" title="Permalink to this headline">¶</a></h2>
<p>The data-source for a line plot is indicated in the annotations file by a line
like:</p>
<div class="highlight-python"><pre>#id,track_id,xmin,xmax,style,strand,data-source
plot1,q,71630143,71695587,plot_line,+,data/pair/gc_content.txt</pre>
</div>
<p>where the <cite>track_id</cite> indicates the track on which to draw the plot.
and the final column indicates a (local) url from which to get the data.
The data format is a <strong>single y value per line</strong> with the number of lines matching
the range specified by the <cite>xmin</cite>, <cite>xmax</cite> parameters in the annotations file.
NOTE: the <cite>style</cite> type specified in the annotations file must be exactly:
&#8216;plot_line&#8217;. Data is scaled automatically. If a plot is specified in a new track (without
other annotations, the values specified in the <cite>xmin</cite>, <cite>xmax</cite> will be used as the track bounds
and it will be drawn in it&#8217;s own track.</p>
<p>The line-color and width are specified in the css file under plot_line.
See the example <a class="reference external" href="http://github.com/brentp/gobe/blob/master/data/pair/gc_content.txt">data</a>
, <a class="reference external" href="http://github.com/brentp/gobe/blob/master/data/pair/annos.txt">annotations file</a> (the line with id of &#8216;plot1&#8217;)
and <a class="reference external" href="http://github.com/brentp/gobe/blob/master/static/gobe2.css">css</a></p>
</div>
<div class="section" id="histograms">
<h2><a class="toc-backref" href="#id13">Histograms</a><a class="headerlink" href="#histograms" title="Permalink to this headline">¶</a></h2>
<p>Histograms are specified in the same manner as <a class="reference internal" href="#lineplots">LinePlots</a> except the style type must be:
&#8216;plot_hist&#8217;. An example annotations line looks like:</p>
<div class="highlight-python"><pre>#id,track_id,xmin,xmax,style,strand,data-source
plot2,q,71630143,71695587,plot_hist,-,data/pair/hist_data.txt</pre>
</div>
<p>the format for histogram data is 4 columns:</p>
<blockquote>
<ol class="arabic simple">
<li>xmin</li>
<li>xmax</li>
<li>y</li>
<li>hex-color</li>
</ol>
</blockquote>
<p>so example data looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="mi">71692442</span><span class="p">,</span><span class="mi">71692569</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="c">#ff0000</span>
<span class="mi">71692721</span><span class="p">,</span><span class="mi">71692883</span><span class="p">,</span><span class="mf">21.444</span><span class="p">,</span><span class="c">#fc0000</span>
<span class="mi">71693023</span><span class="p">,</span><span class="mi">71693079</span><span class="p">,</span><span class="mi">38</span><span class="p">,</span><span class="c">#ffff00</span>
<span class="mi">71693375</span><span class="p">,</span><span class="mi">71693591</span><span class="p">,</span><span class="mf">60.2</span><span class="p">,</span><span class="c">#ff00bb</span>
</pre></div>
</div>
<p>This allows one to specify arbitrary widths and colors for each bar.</p>
</div>
</div>
<div class="section" id="javascript-callbacks">
<h1><a class="toc-backref" href="#id14">Javascript Callbacks</a><a class="headerlink" href="#javascript-callbacks" title="Permalink to this headline">¶</a></h1>
<p>Whenever you click an annotation Gobe.onclick() is called with arguments:
id, name, bpx, px, track_id corresponding to the values in the annotations
file you specified. You should override this callback to perform sophisticated
queries on an annotation, e.g.: via an AJAX call to a server-side script which
will return more information about the feature.</p>
</div>
<div class="section" id="getting-started">
<h1><a class="toc-backref" href="#id15">Getting Started</a><a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>The best way is to copy the index.html example included in the repository,
adjust the paths to correctly point to your own gobe.js and the gobe.swf and
then specify the paths to your own data with a url like:</p>
<blockquote>
/gobe/?annotations=data/t.annos&amp;style=gobe.css</blockquote>
<p>Once you have each of those files in the proper location, gobe will render the
interactive flash movie.</p>
</div>
<div class="section" id="todo">
<h1><a class="toc-backref" href="#id16">TODO</a><a class="headerlink" href="#todo" title="Permalink to this headline">¶</a></h1>
<blockquote>
<ul class="simple">
<li>improve docs.</li>
<li>customizable fonts</li>
<li>move HSP colors to CSS.</li>
</ul>
</blockquote>
<img alt="http://lh4.ggpht.com/_uU_kLC5AdTc/S9O1wilCMBI/AAAAAAAAA0A/NniSF6OhTps/s800/screen2.png" src="http://lh4.ggpht.com/_uU_kLC5AdTc/S9O1wilCMBI/AAAAAAAAA0A/NniSF6OhTps/s800/screen2.png" />
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li><a href="../index.html">gobe v0.3 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
      &copy; Copyright 2010, Brent Pedersen, Haibao Tang.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 0.6.4.
    </div>
  </body>
</html>